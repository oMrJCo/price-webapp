<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>LEEPLUS Price</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;background:#f6f6f6}
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:#fff;border-bottom:1px solid #e5e5e5}
    .left{display:flex;align-items:center;gap:10px}
    .back{color:#333;text-decoration:none;font-size:14px;padding:6px 10px;border:1px solid #e5e5e5;border-radius:999px;background:#fff}
    .title{font-weight:700;font-size:15px}
    .openpdf{color:#111;text-decoration:none;font-size:14px;padding:6px 12px;border:1px solid #111;border-radius:999px;background:#fff}
    .pdf-wrap{height:calc(100vh - 58px);background:#000}
    embed{width:100%;height:100%;border:none;background:#000}
    .err{padding:18px}
  </style>
</head>
<body>
  <div class="topbar">
    <div class="left">
      <a class="back" id="backBtn" href="index.html">← กลับหน้าหมวด</a>
      <div class="title" id="pageTitle">Price</div>
    </div>
    <a class="openpdf" id="openPdfBtn" href="#" target="_blank" rel="noopener">เปิด PDF</a>
  </div>

  <div class="pdf-wrap" id="wrap">
    <embed id="pdfViewer" type="application/pdf">
  </div>

  <script>
    const params = new URLSearchParams(location.search);
    const title = params.get("title") || "Price";
    const pdf = params.get("pdf"); // ต้องเป็น /price-webapp/pdf/... (ได้จาก app.js)

    // base path สำหรับปุ่มกลับ
    const seg = location.pathname.split("/").filter(Boolean);
    const BASE_PATH = seg.length > 0 ? `/${seg[0]}/` : "/";

    document.getElementById("pageTitle").textContent = title;
    document.getElementById("backBtn").href = BASE_PATH + "index.html";

    if (!pdf) {
      document.getElementById("wrap").innerHTML = `<div class="err">ไม่พบไฟล์ PDF</div>`;
    } else {
      // กัน cache + พยายามซ่อน toolbar (บาง browser รองรับ)
      const finalPdf = pdf + (pdf.includes("?") ? "&" : "?") + "v=" + Date.now() + "#toolbar=0";
      document.getElementById("pdfViewer").src = finalPdf;
      document.getElementById("openPdfBtn").href = pdf;
    }
  </script>
</body>
</html>
