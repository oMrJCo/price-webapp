<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LEEPLUS | Price List</title>

  <style>
    body{ margin:0; font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif; background:#f6f7f9; color:#111; }
    .wrap{ max-width:1100px; margin:0 auto; padding:20px; }

    header{ margin-bottom:12px; }
    header h1{ font-size:22px; margin:0 0 6px; font-weight:800; }
    header p{ margin:0; font-size:13px; color:#555; }

    .cover{ position:relative; width:100%; height:240px; border-radius:18px; overflow:hidden; margin:14px 0 22px; background:#d9d9d9; }
    .cover img{ width:100%; height:100%; object-fit:cover; display:block; }
    .cover::after{ content:""; position:absolute; inset:0; background:linear-gradient(to right, rgba(0,0,0,.45), rgba(0,0,0,.10)); pointer-events:none; }
    .cover-content{ position:absolute; inset:0; z-index:1; display:flex; flex-direction:column; justify-content:center; padding:24px 28px; color:#fff; }
    .cover-content h2{ margin:0 0 6px; font-size:28px; font-weight:800; }
    .cover-content p{ margin:0; font-size:14px; max-width:420px; opacity:.95; }
    @media (max-width:600px){ .cover{height:180px;} .cover-content h2{font-size:20px;} }

    .grid{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:14px; }
    @media (min-width:900px){ .grid{ grid-template-columns:repeat(3,minmax(0,1fr)); } }

    .card{ background:#fff; border:1px solid #eee; border-radius:16px; text-decoration:none; color:#111; overflow:hidden; transition:transform .15s ease, box-shadow .15s ease; }
    .card:hover{ transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,0,0,.06); }

    .thumb{ height:130px; background:#ededed; overflow:hidden; display:flex; align-items:center; justify-content:center; color:#777; font-weight:800; font-size:12px; letter-spacing:.5px; }
    .thumb img{ width:100%; height:100%; object-fit:cover; display:block; }

    .content{ padding:12px 14px 14px; }
    .title{ font-size:14px; font-weight:800; margin:0 0 2px; }
    .sub{ font-size:12px; color:#666; margin:0; }

    /* Floating LINE */
    .line-float{ position:fixed; right:18px; bottom:18px; z-index:999; display:flex; flex-direction:column; gap:10px; align-items:center; }
    .line-btn,.qr-btn{ width:54px; height:54px; border-radius:50%; display:flex; align-items:center; justify-content:center; box-shadow:0 6px 18px rgba(0,0,0,.25); cursor:pointer; text-decoration:none; }
    .line-btn{ background:#06c755; }
    .qr-btn{ background:#fff; border:1px solid #e8e8e8; }
    .line-btn img,.qr-btn img{ width:30px; height:30px; display:block; }

    .qr-popup{ position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; z-index:1000; padding:16px; }
    .qr-box{ background:#fff; border-radius:16px; padding:18px; text-align:center; max-width:280px; width:100%; }
    .qr-box img{ width:220px; height:220px; object-fit:contain; }
    .qr-box p{ margin:10px 0 0; font-size:13px; color:#333; }
    .qr-close{ margin-top:12px; width:100%; border:1px solid #ddd; background:#fff; border-radius:12px; padding:10px 12px; cursor:pointer; font-size:13px; }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <h1 id="siteTitle">üì¶ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ LEEPLUS</h1>
      <p id="siteSubtitle">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏Ñ‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</p>
    </header>

    <div class="cover">
      <img id="coverImg" src="assets/cover.jpg" alt="LEEPLUS Cover" onerror="this.style.display='none'">
      <div class="cover-content">
        <h2 id="coverHeadline">‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡∏≠‡∏∞‡πÑ‡∏´‡∏•‡πà‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</h2>
        <p id="coverSubtext">‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ ‡∏ü‡∏¥‡∏•‡πå‡∏° ‡πÅ‡∏•‡∏∞‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏Ñ‡∏£‡∏ö‡∏à‡∏ö‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</p>
      </div>
    </div>

    <!-- ‚úÖ Fallback menu (‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô) -->
    <div class="grid" id="grid">
      <a class="card" href="price.html?title=Battery%20(‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà)&pdf=pdf/battery.pdf">
        <div class="thumb">
          <img src="assets/battery.jpg" alt="Battery"
               onerror="this.remove(); this.parentElement.textContent='BATTERY';">
        </div>
        <div class="content">
          <p class="title">Battery</p>
          <p class="sub">‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà</p>
        </div>
      </a>
    </div>
  </div>

  <div class="line-float">
    <a class="line-btn" id="lineBtn" href="https://line.me/R/ti/p/@leeplus" target="_blank" rel="noopener">
      <img id="lineIcon" src="assets/line-icon.png" alt="Add LINE" onerror="this.style.display='none'">
    </a>
    <div class="qr-btn" onclick="document.getElementById('qrPopup').style.display='flex'">
      <img id="qrIcon" src="assets/line-icon.png" alt="QR" onerror="this.style.display='none'">
    </div>
  </div>

  <div class="qr-popup" id="qrPopup" onclick="this.style.display='none'">
    <div class="qr-box" onclick="event.stopPropagation()">
      <img id="lineQr" src="assets/line-qr.png" alt="LINE QR" onerror="this.style.display='none'">
      <p>‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏≠‡∏î LINE</p>
      <button class="qr-close" onclick="document.getElementById('qrPopup').style.display='none'">‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á</button>
    </div>
  </div>

  <script>
    // ‡πÇ‡∏´‡∏•‡∏î JSON ‡∏à‡∏≤‡∏Å Backoffice ‡∏ñ‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ -> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ö fallback
    async function loadFromBackoffice(){
      try{
        const res = await fetch('data/categories.json?v=' + Date.now());
        if(!res.ok) return;
        const data = await res.json();

        if (data.siteTitle) document.getElementById('siteTitle').textContent = data.siteTitle;
        if (data.siteSubtitle) document.getElementById('siteSubtitle').textContent = data.siteSubtitle;

        if (data.coverImage) document.getElementById('coverImg').src = data.coverImage;
        if (data.coverHeadline) document.getElementById('coverHeadline').textContent = data.coverHeadline;
        if (data.coverSubtext) document.getElementById('coverSubtext').textContent = data.coverSubtext;

        if (data.lineUrl) document.getElementById('lineBtn').href = data.lineUrl;
        if (data.lineIcon) {
          document.getElementById('lineIcon').src = data.lineIcon;
          document.getElementById('qrIcon').src = data.lineIcon;
        }
        if (data.lineQr) document.getElementById('lineQr').src = data.lineQr;

        if (Array.isArray(data.categories) && data.categories.length){
          const grid = document.getElementById('grid');
          grid.innerHTML = '';

          data.categories.forEach(c => {
            const en = c.titleEN || '';
            const th = c.titleTH || '';
            const img = c.image || '';
            const pdf = c.pdf || '';

            const titleParam = encodeURIComponent(en + (th ? ` (${th})` : ''));

            const a = document.createElement('a');
            a.className = 'card';
            a.href = `price.html?title=${titleParam}&pdf=${encodeURIComponent(pdf)}`;

            a.innerHTML = `
              <div class="thumb">
                ${img ? `<img src="${img}" alt="${en}" onerror="this.remove(); this.parentElement.textContent='${en.toUpperCase().slice(0,12)}';">`
                      : `${en.toUpperCase().slice(0,12)}`}
              </div>
              <div class="content">
                <p class="title">${en}</p>
                <p class="sub">${th}</p>
              </div>
            `;
            grid.appendChild(a);
          });
        }
      }catch(e){
        // ‡∏ñ‡πâ‡∏≤ error ‡∏Å‡πá‡∏õ‡∏•‡πà‡∏≠‡∏¢ fallback ‡πÑ‡∏ß‡πâ ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÄ‡∏ß‡πá‡∏ö‡∏û‡∏±‡∏á
      }
    }
    loadFromBackoffice();
  </script>
</body>
</html>
